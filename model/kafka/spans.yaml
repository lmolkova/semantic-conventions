groups:
  - id: span.kafka
    type: attribute_group # TODO: this should be a span
    stability: experimental
    extends: attributes.messaging.trace.minimal
    brief: >
      Apache Kafka spans
    attributes:
      - ref: messaging.consumer.group.name
        brief: "Kafka [consumer group id](https://docs.confluent.io/platform/current/clients/consumer.html)."
        note: ""
        sampling_relevant: true
      - ref: messaging.destination.partition.id
        brief: >
          String representation of the partition id the message (or batch) is sent to or received from.
        requirement_level: recommended
        sampling_relevant: true
      - ref: kafka.message.key
        requirement_level:
          recommended: If span describes operation on a single message.
      - ref: kafka.offset
        requirement_level:
          recommended: If span describes operation on a single message.
      - ref: kafka.message.tombstone
        requirement_level:
          conditionally_required: If value is `true`. When missing, the value is assumed to be `false`.
      - ref: messaging.batch.message_count
        requirement_level:
          conditionally_required: If the span describes an operation on a batch of messages.
      - ref: messaging.client.id
      - ref: messaging.message.body.size
        requirement_level: opt_in
        brief: The size of the message body in bytes. Only applicable for spans describing single message operations.
